<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Analysis using Pareto-filtering of model performance across simulation
periods — paretoTimeAnalysis • hydromad</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Analysis using Pareto-filtering of model performance across simulation
periods — paretoTimeAnalysis" />
<meta property="og:description" content="Identify dominated model realisations, that are inferior to another model in
all simulation periods, optionally in multiple catchments.  Summary results
are then produced to help assess how performance of model realisations and
model structures varies across simulation periods." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydromad</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9-26</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/hydromad.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tutorial.html">Tutorial</a>
    </li>
    <li>
      <a href="../articles/hbv.html">HBV model</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="http://github.com/josephguillaume/hydromad">hydromad 0.9-27</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/josephguillaume/hydromad/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analysis using Pareto-filtering of model performance across simulation
periods</h1>
    <small class="dont-index">Source: <a href='https://github.com/josephguillaume/hydromad/blob/master/R/paretoTimeAnalysis.R'><code>R/paretoTimeAnalysis.R</code></a></small>
    <div class="hidden name"><code>paretoTimeAnalysis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Identify dominated model realisations, that are inferior to another model in
all simulation periods, optionally in multiple catchments.  Summary results
are then produced to help assess how performance of model realisations and
model structures varies across simulation periods.</p>
    </div>

    <pre class="usage"><span class='fu'>paretoTimeAnalysis</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for crossvalidation</span>
<span class='fu'>paretoTimeAnalysis</span><span class='op'>(</span>
  <span class='va'>rl</span>,
  show.models <span class='op'>=</span> <span class='cn'>NA</span>,
  objectives <span class='op'>=</span> <span class='st'>"r.squared"</span>,
  qoi <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q90.in.units.of.runoff <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>Q</span>, <span class='va'>X</span>, <span class='va'>...</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>X</span>, <span class='fl'>0.9</span>, na.rm <span class='op'>=</span>
    <span class='cn'>TRUE</span><span class='op'>)</span>, r.sq.log <span class='op'>=</span> <span class='fu'><a href='hydromad.stats.html'>hmadstat</a></span><span class='op'>(</span><span class='st'>"r.sq.log"</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>arguments to <code>paretoTimeAnalysis.crossvalidation</code> or
<code>paretoTimeAnalysis.data.frame</code></p></td>
    </tr>
    <tr>
      <th>rl</th>
      <td><p>a crossvalidation <code>runlist</code>: a list of fitted model objects
produced by <code><a href='crossValidate.html'>crossValidate</a></code></p></td>
    </tr>
    <tr>
      <th>show.models</th>
      <td><p>If <code>TRUE</code>, print out a table of models and an
indication of whether they are dominated, as produced by
<code>paretoTimeAnalysis_areModelsDominated</code>. If not <code>NA</code>, write out
the table to "show.models_isdominated_models_catchments.csv")</p></td>
    </tr>
    <tr>
      <th>objectives</th>
      <td><p>Vector of column names containing performance measures
used to determine whether models are dominated across time periods. We
assume higher values are better. Values should be transformed prior to use.</p></td>
    </tr>
    <tr>
      <th>qoi</th>
      <td><p>Quantities of interest to calculate, as interpreted by
<code><a href='objFunVal.html'>objFunVal</a></code>. Defaults are given as examples: 90th percentile
runoff (a scalar prediction) and R Squared using log transformed data (a
performance statistic).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>paretoTimeAnalysis</code>, no return value. Used for its side
effect of producing text. Optionally writes csv files (see the argument
<code>show.models</code>).</p>
<p><code>paretoTimeAnalysis_areModelsDominated</code> produces a wide-format
data.frame with id variable columns, a column for each <code>sim.period</code>
value, and a column <code>dominated</code> indicating whether another model is
better in all simulation periods.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Placeholder</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='crossValidate.html'>crossValidate</a></code> for an example use of
<code>paretoTimeAnalysis.crossvalidation</code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Joseph Guillaume</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Dataset consisting of results for two simulation periods,</span>
<span class='co'>##  obtained by calibration in the same periods with different</span>
<span class='co'>##  model structures.</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>YeAl97</span><span class='op'>)</span>

<span class='co'>## For one catchment, produce a table indicating whether models defined by</span>
<span class='co'>## their calib.period and Model.str are dominated according to the objective E</span>
<span class='fu'>paretoTimeAnalysis_areModelsDominated</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>YeAl97</span>, <span class='va'>Catchment</span> <span class='op'>==</span> <span class='st'>"Salmon"</span><span class='op'>)</span>, objectives <span class='op'>=</span> <span class='st'>"E"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   Catchment calib.period Model.str objective First 5Y Second 5Y dominated
#&gt; 1    Salmon     First 5Y      GSFB         E     -Inf      -Inf      TRUE
#&gt; 2    Salmon     First 5Y   IHACRES         E    0.865     0.774      TRUE
#&gt; 3    Salmon     First 5Y    LASCAM         E    0.892     0.905     FALSE
#&gt; 4    Salmon    Second 5Y      GSFB         E     -Inf      -Inf      TRUE
#&gt; 5    Salmon    Second 5Y   IHACRES         E   -0.847     0.819      TRUE
#&gt; 6    Salmon    Second 5Y    LASCAM         E    0.795     0.930     FALSE</div><div class='input'>
<span class='co'>## For all catchments, performance analysis</span>
<span class='fu'>paretoTimeAnalysis</span><span class='op'>(</span><span class='va'>YeAl97</span>, objectives <span class='op'>=</span> <span class='st'>"E"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt; Cross-validation Pareto analysis
#&gt; Which models cannot be rejected, due to dataset uncertainty/non-stationarity?
#&gt; 
#&gt; == Eliminating Pareto-dominated models ==
#&gt;  (worse than another model in all periods)
#&gt; 
#&gt; How many models are dominated (and therefore eliminated)
#&gt;       Canning Salmon Stones
#&gt; FALSE       3      2      2
#&gt; TRUE        3      4      4
#&gt; 
#&gt; Which model structures are non-dominated in each catchment?
#&gt; Proportion of model instances that are non-dominated
#&gt;         GSFB IHACRES LASCAM
#&gt; Canning    0     0.5      1
#&gt; Salmon     0     0.0      1
#&gt; Stones     0     0.0      1
#&gt; 
#&gt; Specify show.models=TRUE to show non-dominated and dominated models
#&gt; Specify show.models=prefix to obtain csv of whether models are dominated
#&gt; 
#&gt; == Performance across all periods ==
#&gt; What is the range of non-dominated performance (RNDP) across all periods?
#&gt; Is it large - is changing datasets causing problems?
#&gt;  Catchment value.min value.max  RNDP
#&gt;    Canning     0.746     0.958 0.212
#&gt;     Salmon     0.795     0.930 0.135
#&gt;     Stones     0.824     0.886 0.062
#&gt; 
#&gt; == Performance in each period ==
#&gt; What is the RNDP in each period?
#&gt; Is it low even though total RNDP is high? Why?
#&gt;  Is there reason to believe the objective function is not comparable over time?
#&gt;  Catchment sim.period value.min value.max  RNDP
#&gt;    Canning   First 5Y     0.746     0.958 0.212
#&gt;    Canning  Second 5Y     0.824     0.945 0.121
#&gt;     Salmon   First 5Y     0.795     0.892 0.097
#&gt;     Salmon  Second 5Y     0.905     0.930 0.025
#&gt;     Stones   First 5Y     0.824     0.886 0.062
#&gt;     Stones  Second 5Y     0.869     0.883 0.014
#&gt; 
#&gt; == Worst non-dominated models in each period ==
#&gt; Do any non-dominated models have unacceptable performance?
#&gt; Which non-dominated model has the worst performance in each period? Why?
#&gt;  Is it consistently the same dataset? Is there reason for that dataset to be problematic?
#&gt;  Is it consistently the same model structure? Should another model structure have been selected?
#&gt;  Is it consistently the same calibration objective function? Is it overfitting part of the record?
#&gt; 
#&gt;  Canning 
#&gt;  sim.period worst.performance calib.period Model.str First.5Y Second.5Y
#&gt;    First 5Y             0.746    Second 5Y    LASCAM    0.746     0.945
#&gt;   Second 5Y             0.824     First 5Y    LASCAM    0.958     0.824
#&gt; 
#&gt;  Salmon 
#&gt;  sim.period worst.performance calib.period Model.str First.5Y Second.5Y
#&gt;    First 5Y             0.795    Second 5Y    LASCAM    0.795     0.930
#&gt;   Second 5Y             0.905     First 5Y    LASCAM    0.892     0.905
#&gt; 
#&gt;  Stones 
#&gt;  sim.period worst.performance calib.period Model.str First.5Y Second.5Y
#&gt;    First 5Y             0.824    Second 5Y    LASCAM    0.824     0.883
#&gt;   Second 5Y             0.869     First 5Y    LASCAM    0.886     0.869
#&gt; 
#&gt; == Variation in inferred internal behaviour - Range of non-dominated parameters ==
#&gt; Is the range of parameters of non-dominated models large for any single model structure?
#&gt; Does the difference in performance correspond to different internal model behaviour?
#&gt; 
#&gt; argument 'pars' missing, skipping section</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joseph Guillaume.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


